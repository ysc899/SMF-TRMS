DROP PROCEDURE WEBOBJLIB.MWW179R1;

-- 감염병신고 조회 (기준항목조회 - 팝업)
CREATE OR REPLACE PROCEDURE WEBOBJLIB.MWW179R1 (IN I_COR VARCHAR(3)
									  , IN I_UID VARCHAR(12)
									  , IN I_IP  VARCHAR(30)
									  , OUT O_MSGCOD VARCHAR(3)
									  , OUT O_ERRCOD VARCHAR(10)
									  , IN I_F999NM1  VARCHAR(5)
									  , IN I_F999NM4  VARCHAR(180)
									  )
LANGUAGE SQL
DYNAMIC RESULT SETS 1									  
BEGIN
	--감염병 신고 팝업
	DECLARE C1 CURSOR WITH RETURN FOR
		SELECT 
			CASE WHEN F999NM2 IN (1,2,3,4) THEN '제' || TRIM ( F999NM1 ) || '군' 
			ELSE '제' || TRIM ( F999NM1 ) || '급' 
			END F999NM1
			, F999NM4
		FROM MCLISDLIB . MC999D@
		WHERE 1 = 1
		AND F999COR = I_COR
		AND F999CD1 = 'STTT'
		AND F999CD2 = 'PATH'
		AND F999NM1 LIKE '%' || I_F999NM1 || '%'
		AND F999NM4 LIKE '%' || I_F999NM4 || '%' ;
	OPEN C1 ;
	SET O_ERRCOD = '' ;
	SET O_MSGCOD = 200 ;
	
END       